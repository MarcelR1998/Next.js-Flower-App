{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Marcel\\\\Documents\\\\kodprojekt\\\\arbetsprovMarcelWillAndSkill\\\\components\\\\Comments.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Comment from './Comment';\nimport { useState } from 'react';\n\nconst Comments = () => {\n  const {\n    0: comments,\n    1: setComments\n  } = useState([]);\n  const {\n    0: loaded,\n    1: setLoaded\n  } = useState(false);\n  const {\n    0: index,\n    1: setIndex\n  } = useState(null);\n  const {\n    0: userComment,\n    1: setUserComment\n  } = useState(\"\");\n  useEffect(() => {\n    this.fetchComments();\n    setIndex(this.props.index);\n  }, []); //Fetches comments, both on page load and when a comment is posted from client\n\n  fetchComments = async () => {\n    const res = await fetch('https://flowers-mock-data.firebaseio.com/comments.json');\n    const data = await res.json();\n    setComments(Object.entries(data));\n    setLoaded(true);\n  };\n\n  handleChange = e => {\n    setUserComment(e.target.value);\n  };\n\n  post = async message => {\n    if (message !== \"\") {\n      await fetch(`https://flowers-mock-data.firebaseio.com/comments/MarcelR1998/${this.state.index}.json`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          comment: message\n        })\n      }).then(res => {\n        console.log(res);\n        this.fetchComments();\n        setUserComment(\"\");\n      }).catch(err => console.error(err));\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-1212496929\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-1212496929\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, \"Comments\"), __jsx(\"div\", {\n    id: \"commentForm\",\n    className: \"jsx-1212496929\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, __jsx(\"textarea\", {\n    id: \"\",\n    cols: \"30\",\n    rows: \"2\",\n    value: this.state.userComment,\n    onChange: this.handleChange,\n    className: \"jsx-1212496929\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }), __jsx(\"button\", {\n    onClick: () => this.post(this.state.userComment),\n    className: \"jsx-1212496929\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, \"Comment\")), this.state.loaded ? this.state.comments.map(user => user[1][this.state.index] ? Object.entries(user[1][this.state.index]).map((myComment, index) => myComment[1].comment ? __jsx(\"div\", {\n    key: user[0] + index,\n    className: \"jsx-1212496929\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, __jsx(Comment, {\n    user: user[0],\n    comment: myComment[1].comment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 33\n    }\n  })) : null) : null) : null, __jsx(_JSXStyle, {\n    id: \"1212496929\",\n    __self: this\n  }, \"#commentForm.jsx-1212496929{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}textarea.jsx-1212496929{resize:none;width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTWFyY2VsXFxEb2N1bWVudHNcXGtvZHByb2pla3RcXGFyYmV0c3Byb3ZNYXJjZWxXaWxsQW5kU2tpbGxcXGNvbXBvbmVudHNcXENvbW1lbnRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQStEd0IsQUFHa0MsQUFJRCxZQUNELFdBQ2YsbURBTGUsV0FDZiIsImZpbGUiOiJDOlxcVXNlcnNcXE1hcmNlbFxcRG9jdW1lbnRzXFxrb2Rwcm9qZWt0XFxhcmJldHNwcm92TWFyY2VsV2lsbEFuZFNraWxsXFxjb21wb25lbnRzXFxDb21tZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21tZW50IGZyb20gJy4vQ29tbWVudCc7XHJcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuY29uc3QgQ29tbWVudHMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBbY29tbWVudHMsIHNldENvbW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtsb2FkZWQsIHNldExvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBjb25zdCBbaW5kZXgsIHNldEluZGV4XSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gICAgY29uc3QgW3VzZXJDb21tZW50LCBzZXRVc2VyQ29tbWVudF0gPSB1c2VTdGF0ZShcIlwiKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hDb21tZW50cygpO1xyXG4gICAgICAgIHNldEluZGV4KHRoaXMucHJvcHMuaW5kZXgpXHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgLy9GZXRjaGVzIGNvbW1lbnRzLCBib3RoIG9uIHBhZ2UgbG9hZCBhbmQgd2hlbiBhIGNvbW1lbnQgaXMgcG9zdGVkIGZyb20gY2xpZW50XHJcbiAgICBmZXRjaENvbW1lbnRzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2Zsb3dlcnMtbW9jay1kYXRhLmZpcmViYXNlaW8uY29tL2NvbW1lbnRzLmpzb24nKTtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICBzZXRDb21tZW50cyhPYmplY3QuZW50cmllcyhkYXRhKSk7XHJcbiAgICAgICAgc2V0TG9hZGVkKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XHJcbiAgICAgICAgc2V0VXNlckNvbW1lbnQoZS50YXJnZXQudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3QgPSBhc3luYyAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGlmIChtZXNzYWdlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGZldGNoKGBodHRwczovL2Zsb3dlcnMtbW9jay1kYXRhLmZpcmViYXNlaW8uY29tL2NvbW1lbnRzL01hcmNlbFIxOTk4LyR7dGhpcy5zdGF0ZS5pbmRleH0uanNvbmAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGNvbW1lbnQ6IG1lc3NhZ2UgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hDb21tZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFVzZXJDb21tZW50KFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8aDI+Q29tbWVudHM8L2gyPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwiY29tbWVudEZvcm1cIj5cclxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cIlwiIGNvbHM9XCIzMFwiIHJvd3M9XCIyXCIgdmFsdWU9e3RoaXMuc3RhdGUudXNlckNvbW1lbnR9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdGhpcy5wb3N0KHRoaXMuc3RhdGUudXNlckNvbW1lbnQpfT5Db21tZW50PC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5sb2FkZWQgPyB0aGlzLnN0YXRlLmNvbW1lbnRzLm1hcCh1c2VyID0+IChcclxuICAgICAgICAgICAgICAgIHVzZXJbMV1bdGhpcy5zdGF0ZS5pbmRleF0gPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXModXNlclsxXVt0aGlzLnN0YXRlLmluZGV4XSkubWFwKChteUNvbW1lbnQsIGluZGV4KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG15Q29tbWVudFsxXS5jb21tZW50ID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXt1c2VyWzBdICsgaW5kZXh9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb21tZW50IHVzZXI9e3VzZXJbMF19IGNvbW1lbnQ9e215Q29tbWVudFsxXS5jb21tZW50fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGxcclxuICAgICAgICAgICAgKSkgOiBudWxsfVxyXG4gICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAjY29tbWVudEZvcm17XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRleHRhcmVhIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tbWVudHM7Il19 */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Marcel\\\\\\\\Documents\\\\\\\\kodprojekt\\\\\\\\arbetsprovMarcelWillAndSkill\\\\\\\\components\\\\\\\\Comments.js */\"));\n};\n\nexport default Comments;","map":{"version":3,"sources":["C:/Users/Marcel/Documents/kodprojekt/arbetsprovMarcelWillAndSkill/components/Comments.js"],"names":["Comment","useState","Comments","comments","setComments","loaded","setLoaded","index","setIndex","userComment","setUserComment","useEffect","fetchComments","props","res","fetch","data","json","Object","entries","handleChange","e","target","value","post","message","state","method","headers","body","JSON","stringify","comment","then","console","log","catch","err","error","map","user","myComment"],"mappings":"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","sourcesContent":["import Comment from './Comment';\r\nimport { useState } from 'react';\r\n\r\nconst Comments = () => {\r\n    const [comments, setComments] = useState([]);\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [index, setIndex] = useState(null);\r\n    const [userComment, setUserComment] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        this.fetchComments();\r\n        setIndex(this.props.index)\r\n    }, []);\r\n\r\n    //Fetches comments, both on page load and when a comment is posted from client\r\n    fetchComments = async () => {\r\n        const res = await fetch('https://flowers-mock-data.firebaseio.com/comments.json');\r\n        const data = await res.json();\r\n        setComments(Object.entries(data));\r\n        setLoaded(true);\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        setUserComment(e.target.value);\r\n    }\r\n\r\n    post = async (message) => {\r\n        if (message !== \"\") {\r\n            await fetch(`https://flowers-mock-data.firebaseio.com/comments/MarcelR1998/${this.state.index}.json`, {\r\n                method: 'post',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ comment: message })\r\n            })\r\n                .then(res => {\r\n                    console.log(res)\r\n                    this.fetchComments();\r\n                    setUserComment(\"\");\r\n                })\r\n                .catch(err => console.error(err))\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h2>Comments</h2>\r\n            <div id=\"commentForm\">\r\n                <textarea id=\"\" cols=\"30\" rows=\"2\" value={this.state.userComment} onChange={this.handleChange} />\r\n                <button onClick={() => this.post(this.state.userComment)}>Comment</button>\r\n            </div>\r\n            {this.state.loaded ? this.state.comments.map(user => (\r\n                user[1][this.state.index] ? (\r\n                    Object.entries(user[1][this.state.index]).map((myComment, index) => (\r\n                        myComment[1].comment ?\r\n                            <div key={user[0] + index}>\r\n                                <Comment user={user[0]} comment={myComment[1].comment} />\r\n                            </div>\r\n                            : null\r\n                    ))\r\n                ) : null\r\n            )) : null}\r\n            <style jsx>{`\r\n                #commentForm{\r\n                    display: flex;\r\n                    width: 100%;\r\n                }\r\n                textarea {\r\n                    resize: none;\r\n                    width: 100%;\r\n                }\r\n                `}</style>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Comments;"]},"metadata":{},"sourceType":"module"}