{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport cookies from 'js-cookie';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport initFirebase from '../auth/initFirebase';\ninitFirebase();\n\nconst useUser = () => {\n  const {\n    0: user,\n    1: setUser\n  } = useState();\n  const router = useRouter();\n\n  const logout = async () => {\n    return firebase.auth().signOut().then(() => {\n      // Sign-out successful.\n      cookies.remove('auth');\n      router.push('/auth');\n    }).catch(e => {\n      console.error(e);\n    });\n  };\n\n  useEffect(() => {\n    const cookie = cookies.get('auth');\n\n    if (!cookie) {\n      router.push('/');\n      return;\n    }\n\n    setUser(JSON.parse(cookie)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return {\n    user,\n    logout\n  };\n};\n\nexport { useUser };","map":{"version":3,"sources":["C:/Users/Marcel/Documents/kodprojekt/arbetsprovMarcelWillAndSkill/utils/auth/useUser.js"],"names":["useEffect","useState","useRouter","cookies","firebase","initFirebase","useUser","user","setUser","router","logout","auth","signOut","then","remove","push","catch","e","console","error","cookie","get","JSON","parse"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AAEAA,YAAY;;AAEZ,MAAMC,OAAO,GAAG,MAAM;AAClB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBP,QAAQ,EAAhC;AACA,QAAMQ,MAAM,GAAGP,SAAS,EAAxB;;AAEA,QAAMQ,MAAM,GAAG,YAAY;AACvB,WAAON,QAAQ,CACVO,IADE,GAEFC,OAFE,GAGFC,IAHE,CAGG,MAAM;AACR;AACAV,MAAAA,OAAO,CAACW,MAAR,CAAe,MAAf;AACAL,MAAAA,MAAM,CAACM,IAAP,CAAY,OAAZ;AACH,KAPE,EAQFC,KARE,CAQKC,CAAD,IAAO;AACVC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACH,KAVE,CAAP;AAWH,GAZD;;AAcAjB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMoB,MAAM,GAAGjB,OAAO,CAACkB,GAAR,CAAY,MAAZ,CAAf;;AACA,QAAI,CAACD,MAAL,EAAa;AACTX,MAAAA,MAAM,CAACM,IAAP,CAAY,GAAZ;AACA;AACH;;AACDP,IAAAA,OAAO,CAACc,IAAI,CAACC,KAAL,CAAWH,MAAX,CAAD,CAAP,CANY,CAOZ;AACH,GARQ,EAQN,EARM,CAAT;AAUA,SAAO;AAAEb,IAAAA,IAAF;AAAQG,IAAAA;AAAR,GAAP;AACH,CA7BD;;AA+BA,SAASJ,OAAT","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport cookies from 'js-cookie'\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport initFirebase from '../auth/initFirebase'\r\n\r\ninitFirebase()\r\n\r\nconst useUser = () => {\r\n    const [user, setUser] = useState()\r\n    const router = useRouter()\r\n\r\n    const logout = async () => {\r\n        return firebase\r\n            .auth()\r\n            .signOut()\r\n            .then(() => {\r\n                // Sign-out successful.\r\n                cookies.remove('auth')\r\n                router.push('/auth')\r\n            })\r\n            .catch((e) => {\r\n                console.error(e)\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        const cookie = cookies.get('auth')\r\n        if (!cookie) {\r\n            router.push('/')\r\n            return\r\n        }\r\n        setUser(JSON.parse(cookie))\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return { user, logout }\r\n}\r\n\r\nexport { useUser }"]},"metadata":{},"sourceType":"module"}